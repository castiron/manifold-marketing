/* stylelint-disable selector-max-id, number-max-precision */
.bookpile {
  #leaning-book-1,
  #leaning-book-2,
  #book-piled-2,
  #book-piled-3,
  #arrow,
  #phone,
  #sparks {
    opacity: 0;
    transition: opacity $timing $durationSlow;
  }

  #spectacles {
    transform: translate(0, 87px);
  }

  &.animated {
    $step1: 0.7s;
    $step2: 0.5s;
    $step3: 0.5s;
    $step4: 0.5s;
    $specsUpDuration: 0.8s;
    $pileDuration: 0.7s;
    $pilesDuration: (1.375 * $specsUpDuration) + $pileDuration;
    $phoneAppearanceDuration: (0.92 * $pilesDuration) + 0.5s;

    svg {
      overflow: visible;
    }

    @keyframes fadeOn {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }

    #leaning-book-1 {
      @keyframes lean1 {
        0% {
          opacity: 0;
          transform: rotate(-15deg);
          transform-origin: 50% 100%;
        }

        50% {
          opacity: 1;
        }

        100% {
          opacity: 1;
          transform: rotate(0deg);
          transform-origin: 50% 50%;
        }
      }

      opacity: 0;
      animation: $pileDuration 1.375 * $specsUpDuration ease-in forwards lean1;
    }

    #leaning-book-2 {
      @keyframes lean2 {
        0% {
          opacity: 0;
          transform: rotate(-15deg);
          transform-origin: 50% 100%;
        }

        50% {
          opacity: 1;
        }

        100% {
          opacity: 1;
          transform: rotate(0deg);
          transform-origin: 50% 50%;
        }
      }

      opacity: 0;
      animation: $pileDuration 1.25 * $specsUpDuration ease-in forwards lean2;
    }

    #book-piled-1 {
      transform-origin: 50% 50%;
    }

    #book-piled-2 {
      @keyframes fall2 {
        0% {
          opacity: 0;
          transform: scale(0.6, 0.6) translate(0, -30px) rotate(-3deg);
          transform-origin: 50% 50%;
        }

        15% {
          opacity: 0;
          transform: scale(0.6, 0.6) translate(0, -35px) rotate(-3deg);
          transform-origin: 50% 50%;
        }

        30% {
          opacity: 1;
          transform: scale(1, 1) translate(0, -28.6638px) rotate(0deg);
        }

        60% {
          transform: scale(1, 1) translate(0, -14.3319px) rotate(3deg);
        }

        90% {
          transform: scale(1, 1) translate(0, 0) rotate(0deg);
        }

        93% {
          transform: scale(1, 1) translate(0, -7px) rotate(-3deg);
        }

        96% {
          transform: scale(1, 1) translate(0, -3px) rotate(0deg);
        }

        100% {
          opacity: 1;
          transform: scale(1, 1) translate(0, 0) rotate(0deg);
          transform-origin: 50% 50%;
        }
      }

      opacity: 0;
      transform-origin: 50% 50%;
      animation: 0.3s 0.4s ease-in forwards fall2;
    }

    #book-piled-3 {
      @keyframes fall3 {
        0% {
          opacity: 0;
          transform: scale(0.6, 0.6) translate(0, -30px) rotate(-3deg);
          transform-origin: 50% 50%;
        }

        15% {
          opacity: 0;
          transform: scale(0.6, 0.6) translate(0, -35px) rotate(-3deg);
          transform-origin: 50% 50%;
        }

        30% {
          opacity: 1;
          transform: scale(1, 1) translate(0, -28.6638px) rotate(0deg);
        }

        60% {
          transform: scale(1, 1) translate(0, -14.3319px) rotate(3deg);
        }

        90% {
          transform: scale(1, 1) translate(0, 0) rotate(0deg);
        }

        93% {
          transform: scale(1, 1) translate(0, -7px) rotate(-3deg);
        }

        96% {
          transform: scale(1, 1) translate(0, -3px) rotate(0deg);
        }

        100% {
          opacity: 1;
          transform: scale(1, 1) translate(0, 0) rotate(0deg);
          transform-origin: 50% 50%;
        }
      }

      opacity: 0;
      transform-origin: 50% 50%;
      animation: 0.3s 1.1s ease-in forwards fall3;
    }

    #spectacles {
      $start: 87px;
      $firstStop: 42px;
      $secondStop: 0;

      @keyframes specsUp1 {
        0% {
          transform: translate(-3px, $start) rotate(-7deg);
        }

        50% {
          transform: translate(0, 12px) rotate(1deg);
        }

        100% {
          transform: translate(0, $firstStop) rotate(3deg);
        }
      }

      @keyframes specsUp2 {
        0% {
          transform: translate(0, $firstStop) rotate(3deg);
        }

        50% {
          transform: translate(0, -20px) rotate(-2deg);
        }

        100% {
          transform: translate(0, $secondStop) rotate(0deg);
        }
      }

      transform-origin: 50% 50%;
      animation: $specsUpDuration ease-in forwards specsUp1, $specsUpDuration $specsUpDuration ease-in forwards specsUp2;
    }

    #arrow {
      $start: -35px;

      @keyframes arrowRight {
        0% {
          opacity: 0;
          transform: translateX($start);
        }

        50% {
          opacity: 1;
        }

        80% {
          transform: translateX(10px);
        }

        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }

      opacity: 0;
      animation: 0.6s 0.8888 * $pilesDuration ease-in-out forwards arrowRight;
    }

    #phone {
      opacity: 0;
      animation: 0.5s 0.92 * $pilesDuration ease-in forwards fadeOn;
    }

    #sparks {
      $sparksStep: 0.5 * $phoneAppearanceDuration;

      @keyframes sparkUp {
        0% {
          transform: translateY(29px);
        }

        100% {
          transform: translateY(0);
        }
      }

      @keyframes sparkUpLeft {
        0% {
          transform: translate(59.54597px, 178.85244px) rotate(-34.1851deg);
        }

        100% {
          transform: translate(41.54597px, 153.85244px) rotate(-34.1851deg);
        }
      }

      @keyframes sparkUpRight {
        0% {
          transform: translate(105.94753px, 276.83593px) rotate(-55.80059deg);
        }

        100% {
          transform: translate(123.94753px, 252.83593px) rotate(-55.80059deg);
        }
      }

      opacity: 0;
      animation: 0.8s 0.8 * $phoneAppearanceDuration ease-in forwards fadeOn;

      #spark-left {
        animation: 1s $sparksStep ease-in forwards sparkUpLeft;
      }

      #spark-middle {
        animation: 1s $sparksStep ease-in forwards sparkUp;
      }

      #spark-right {
        animation: 1s $sparksStep ease-in forwards sparkUpRight;
      }
    }
  }
}
/* stylelint-enable */
